<template lang="pug">
.g-form-demo
	g-form(v-model='formData', :data='data')
		template(#children-suffix)
			span ä¸ª
	el-button(v-blur, type='primary') 123
</template>

<script setup>
const formData = ref({
	name: '',
	openStatus: 1,
	picture: [
		{
			name: 'food.jpeg',
			url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100',
		},
		{
			name: 'food.jpeg',
			url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100',
		},
	],
})

const handleBeforeUpload = file => {
	// è¿”å›ä¸€ä¸ªPromise
	console.log('ğŸš€ ~ file: index.vue:127 ~ handleBeforeUpload ~ file:', file)
	return true
}

const data = ref([
	{
		key: 'name',
		label: 'å§“å',
		component: 'el-input',
		props: { placeholder: 'è¯·è¾“å…¥å§“å' },
		rules: [{ required: true, trigger: 'blur', message: 'è¯·è¾“å…¥å§“å' }],
	},
	{
		key: 'children',
		label: 'å­å¥³',
		slot: true,
		component: 'el-input',
		props: { placeholder: 'è¯·è¾“å…¥å­å¥³ä¸ªæ•°' },
		rules: [{ required: true, trigger: 'blur', message: 'è¯·è¾“å…¥å­å¥³ä¸ªæ•°' }],
	},
	{
		key: 'age',
		label: 'å¹´é¾„',
		component: 'el-input',
		props: { placeholder: 'è¯·è¾“å…¥å¹´é¾„', clearable: true },
		rules: [{ required: true, trigger: 'blur', message: 'è¯·è¾“å…¥å¹´é¾„' }],
	},
	{
		key: 'sex',
		label: 'æ€§åˆ«',
		component: 'el-select',
		props: { placeholder: 'è¯·é€‰æ‹©æ€§åˆ«', clearable: true },
		options: [
			{
				label: 'ç”·',
				value: 1,
			},
			{
				label: 'å¥³',
				value: 0,
			},
		],
		rules: [{ required: true, trigger: 'change', message: 'è¯·é€‰æ‹©æ€§åˆ«' }],
	},
	{
		key: 'marry',
		label: 'æ˜¯å¦ç»“å©š',
		component: 'el-switch',
		props: {},
	},
	{
		key: 'hobby',
		label: 'å…´è¶£çˆ±å¥½',
		component: 'el-checkbox',
		props: {},
		options: [
			{
				label: 'ç¯®çƒ',
				value: 0,
			},
			{
				label: 'è¶³çƒ',
				value: 1,
			},
			{
				label: 'æ’çƒ',
				value: 2,
			},
		],
	},
	{
		key: 'progress',
		label: 'é¡¹ç›®è¿›åº¦',
		component: 'el-slider',
		props: { showInput: true },
	},
	{
		key: 'openStatus',
		label: 'æ˜¯å¦å¼€å¯',
		component: 'el-radio',
		props: {},
		options: [
			{
				label: 'å…³é—­',
				value: 0,
			},
			{
				label: 'å¼€å¯',
				value: 1,
			},
		],
	},
	{
		key: 'time',
		label: 'æ—¶é—´',
		component: 'el-time-picker',
		props: {},
	},
	{
		key: 'date',
		label: 'æ—¥æœŸ',
		component: 'el-date-picker',
		props: {},
	},
	{
		key: 'dateRange',
		label: 'æ—¥æœŸèŒƒå›´',
		component: 'el-date-picker',
		props: { type: 'daterange' },
	},
	{
		key: 'remark',
		label: 'å¤‡æ³¨',
		component: 'el-input',
		props: { type: 'textarea' },
		desc: '123',
	},
	{
		key: 'picture',
		label: 'ç«™ç‚¹å›¾ç‰‡',
		component: 'el-upload',
		props: {
			action: 'https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15',
			accept: 'image/gif, image/jpeg, image/jpg, image/png',
			beforeUpload: handleBeforeUpload,
		},
	},
])
</script>

<style lang="scss" scoped>
.g-form-demo {
	padding: 12px;
}
</style>
